(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function a(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=a(i);fetch(i.href,o)}})();const S=[{id:"kai",name:"Kai",element:"OgieÅ„",color:"#C41E3A",emoji:"ðŸ”¥",avatar:"/avatars/kai.svg",encouragements:["GorÄ…co! Åšwietna robota!","PÅ‚omienne obliczenia!","OgieÅ„! Tak trzymaj!","Rozpalasz siÄ™!"],comforts:["Nie poddawaj siÄ™! OgieÅ„ nigdy nie gaÅ›nie!","SprÃ³buj jeszcze raz, wojowniku!","KaÅ¼dy ninja siÄ™ uczy!"]},{id:"jay",name:"Jay",element:"BÅ‚yskawica",color:"#0047AB",emoji:"âš¡",avatar:"/avatars/jay.svg",encouragements:["Elektrycznie! BÅ‚yskawiczna odpowiedÅº!","Szok! Jak szybko!","PiorunujÄ…ca robota!","JesteÅ› jak bÅ‚yskawica!"],comforts:["Hej, nawet bÅ‚yskawice czasem chybiajÄ…!","SprÃ³buj jeszcze! BÄ™dzie super!","Nie martw siÄ™, dasz radÄ™!"]},{id:"cole",name:"Cole",element:"Ziemia",color:"#2F2F2F",emoji:"ðŸ”ï¸",avatar:"/avatars/cole.svg",encouragements:["Solidna odpowiedÅº jak skaÅ‚a!","Mocne! Ziemia siÄ™ trzÄ™sie!","Niewzruszony jak gÃ³ra!","Skalna pewnoÅ›Ä‡!"],comforts:["BÄ…dÅº silny jak gÃ³ra, prÃ³buj dalej!","Ziemia jest cierpliwa, Ty teÅ¼ bÄ…dÅº!","KaÅ¼da gÃ³ra zaczyna siÄ™ od kamyka!"]},{id:"zane",name:"Zane",element:"LÃ³d",color:"#87CEEB",emoji:"â„ï¸",avatar:"/avatars/zane.svg",encouragements:["Lodowato precyzyjne!","ChÅ‚odna kalkulacja!","Zimna krew, gorÄ…cy wynik!","DoskonaÅ‚a logika!"],comforts:["Analiza bÅ‚Ä™du pomoÅ¼e nastÄ™pnym razem.","Spokojnie, oblicz jeszcze raz.","KaÅ¼dy bÅ‚Ä…d to nauka!"]},{id:"lloyd",name:"Lloyd",element:"Energia",color:"#228B22",emoji:"ðŸ’š",avatar:"/avatars/lloyd.svg",encouragements:["Zielona moc! Åšwietnie!","Energia pÅ‚ynie przez Ciebie!","Mistrzowskie obliczenie!","Prawdziwy Zielony Ninja!"],comforts:["Nawet Zielony Ninja musiaÅ‚ siÄ™ uczyÄ‡!","Energia wraca! SprÃ³buj jeszcze!","WierzÄ™ w Ciebie, wojowniku!"]},{id:"nya",name:"Nya",element:"Woda",color:"#4169E1",emoji:"ðŸ’§",avatar:"/avatars/nya.svg",encouragements:["PÅ‚ynna perfekcja!","Jak fala - nie do zatrzymania!","Wodna precyzja!","Åšwietny przepÅ‚yw myÅ›li!"],comforts:["Woda zawsze znajdzie drogÄ™, Ty teÅ¼!","PÅ‚yÅ„ dalej, nie poddawaj siÄ™!","KaÅ¼da kropla siÄ™ liczy!"]}],L=[{id:"easy",name:"Easy",namePolish:"Åatwy",maxNumber:10,operators:["+","-"],description:"Dodawanie i odejmowanie do 10"},{id:"medium",name:"Medium",namePolish:"Åšredni",maxNumber:20,operators:["+","-"],description:"Dodawanie i odejmowanie do 20"},{id:"hard",name:"Hard",namePolish:"Trudny",maxNumber:50,operators:["+","-"],description:"Dodawanie i odejmowanie do 50"},{id:"master",name:"Master",namePolish:"Mistrz",maxNumber:100,operators:["+","-"],description:"Dodawanie i odejmowanie do 100"}],ae="ninjago-math-game-save",u={PLAYER_MAX_HEALTH:100,ENEMY_MAX_HEALTH:100,PLAYER_ATTACK_DAMAGE:15,ENEMY_ATTACK_DAMAGE:20,IDLE_ATTACK_DAMAGE:10,IDLE_TIMEOUT_MS:12e3,HEALTH_REGEN_ON_HIT:5,STREAK_BONUS_DAMAGE:3};function M(e){return Math.floor(Math.random()*e)+1}function _(e){return e[Math.floor(Math.random()*e.length)]}function Te(e){const t=M(Math.max(1,e-1)),a=Math.max(1,e-t),n=M(a);return{operand1:t,operand2:n,operator:"+",correctAnswer:t+n}}function Ee(e){const t=M(Math.max(2,e-1))+1,a=M(t-1);return{operand1:t,operand2:a,operator:"-",correctAnswer:t-a}}function ne(e){return _(e.operators)==="+"?Te(e.maxNumber):Ee(e.maxNumber)}function be(e,t){return e.correctAnswer===t}function q(e){return`${e.operand1} ${e.operator} ${e.operand2} = ?`}function K(e){try{localStorage.setItem(ae,JSON.stringify(e))}catch{console.warn("Nie moÅ¼na zapisaÄ‡ danych gry")}}function xe(){try{const e=localStorage.getItem(ae);if(e)return JSON.parse(e)}catch{console.warn("Nie moÅ¼na wczytaÄ‡ danych gry")}return null}function re(e){return S.find(t=>t.id===e)||S[0]}function ie(e){return L.find(t=>t.id===e)||L[0]}function oe(){const e=xe(),t=e?re(e.selectedNinjaId):S[4],a=e?ie(e.selectedDifficultyId):L[0],n=e?.highScore||0;return{currentNinja:t,score:0,highScore:n,streak:0,currentProblem:null,difficulty:a,totalProblems:0,correctAnswers:0,isGameActive:!1,playerHealth:u.PLAYER_MAX_HEALTH,maxPlayerHealth:u.PLAYER_MAX_HEALTH,enemyHealth:u.ENEMY_MAX_HEALTH,maxEnemyHealth:u.ENEMY_MAX_HEALTH,isGameOver:!1,lastAnswerTime:Date.now()}}function ce(e){return{...e,score:0,streak:0,currentProblem:ne(e.difficulty),totalProblems:0,correctAnswers:0,isGameActive:!0,playerHealth:u.PLAYER_MAX_HEALTH,maxPlayerHealth:u.PLAYER_MAX_HEALTH,enemyHealth:u.ENEMY_MAX_HEALTH,maxEnemyHealth:u.ENEMY_MAX_HEALTH,isGameOver:!1,lastAnswerTime:Date.now()}}function je(e,t){if(!e.currentProblem||e.isGameOver)return{state:e,isCorrect:!1,message:"",playerAttacked:!1,enemyAttacked:!1,enemyDefeated:!1,playerDefeated:!1,damageDealt:0,damageTaken:0};const a=be(e.currentProblem,t),n=e.currentNinja;let i=e.score,o=e.streak,s=e.highScore,m=e.playerHealth,f=e.enemyHealth,D,P=0,G=0,W=!1,E=!1;if(a){const J=Math.min(o,5),ve=10+J*2;i+=ve,o+=1,D=_(n.encouragements),i>s&&(s=i),P=u.PLAYER_ATTACK_DAMAGE+J*u.STREAK_BONUS_DAMAGE,f=Math.max(0,f-P),m=Math.min(e.maxPlayerHealth,m+u.HEALTH_REGEN_ON_HIT),f<=0&&(W=!0,f=e.maxEnemyHealth,i+=50,i>s&&(s=i))}else o=0,D=_(n.comforts),G=u.ENEMY_ATTACK_DAMAGE,m=Math.max(0,m-G),m<=0&&(E=!0);const ke={...e,score:i,highScore:s,streak:o,currentProblem:E?null:ne(e.difficulty),totalProblems:e.totalProblems+1,correctAnswers:e.correctAnswers+(a?1:0),playerHealth:m,enemyHealth:f,isGameOver:E,lastAnswerTime:Date.now()};return K({highScore:s,selectedNinjaId:e.currentNinja.id,selectedDifficultyId:e.difficulty.id}),{state:ke,isCorrect:a,message:D,playerAttacked:a,enemyAttacked:!a,enemyDefeated:W,playerDefeated:E,damageDealt:P,damageTaken:G}}function Se(e){if(!e.isGameActive||e.isGameOver)return{state:e,attacked:!1,damage:0,playerDefeated:!1};const t=u.IDLE_ATTACK_DAMAGE,a=Math.max(0,e.playerHealth-t),n=a<=0;return{state:{...e,playerHealth:a,isGameOver:n,lastAnswerTime:Date.now()},attacked:!0,damage:t,playerDefeated:n}}function Le(e){return!e.isGameActive||e.isGameOver?!1:Date.now()-e.lastAnswerTime>=u.IDLE_TIMEOUT_MS}function se(e,t){const a=re(t);return K({highScore:e.highScore,selectedNinjaId:a.id,selectedDifficultyId:e.difficulty.id}),{...e,currentNinja:a}}function le(e,t){const a=ie(t);return K({highScore:e.highScore,selectedNinjaId:e.currentNinja.id,selectedDifficultyId:a.id}),{...e,difficulty:a}}let I=null,y=!1;const U=localStorage.getItem("ninjago-muted");U!==null&&(y=U==="true");function Me(){return I||(I=new(window.AudioContext||window.webkitAudioContext)),I}function ze(e){const t=e.currentTime;[523.25,659.25,783.99].forEach((n,i)=>{const o=e.createOscillator(),s=e.createGain();o.type="sine",o.frequency.value=n,s.gain.setValueAtTime(0,t+i*.05),s.gain.linearRampToValueAtTime(.15,t+i*.05+.05),s.gain.exponentialRampToValueAtTime(.01,t+.4),o.connect(s),s.connect(e.destination),o.start(t+i*.05),o.stop(t+.5)})}function He(e){const t=e.currentTime,a=e.createOscillator(),n=e.createGain();a.type="square",a.frequency.setValueAtTime(200,t),a.frequency.linearRampToValueAtTime(150,t+.2),n.gain.setValueAtTime(.1,t),n.gain.exponentialRampToValueAtTime(.01,t+.25),a.connect(n),n.connect(e.destination),a.start(t),a.stop(t+.3)}function Ne(e){const t=e.currentTime,a=e.createOscillator(),n=e.createGain();a.type="sawtooth",a.frequency.setValueAtTime(800,t),a.frequency.exponentialRampToValueAtTime(200,t+.15),n.gain.setValueAtTime(.12,t),n.gain.exponentialRampToValueAtTime(.01,t+.15),a.connect(n),n.connect(e.destination),a.start(t),a.stop(t+.2)}function Ce(e){const t=e.currentTime,a=e.sampleRate*.1,n=e.createBuffer(1,a,e.sampleRate),i=n.getChannelData(0);for(let f=0;f<a;f++)i[f]=(Math.random()*2-1)*Math.exp(-f/(a*.1));const o=e.createBufferSource();o.buffer=n;const s=e.createBiquadFilter();s.type="lowpass",s.frequency.value=500;const m=e.createGain();m.gain.setValueAtTime(.2,t),m.gain.exponentialRampToValueAtTime(.01,t+.1),o.connect(s),s.connect(m),m.connect(e.destination),o.start(t)}function De(e){const t=e.currentTime;[{freq:523.25,start:0,duration:.15},{freq:659.25,start:.1,duration:.15},{freq:783.99,start:.2,duration:.15},{freq:1046.5,start:.3,duration:.4}].forEach(n=>{const i=e.createOscillator(),o=e.createGain();i.type="triangle",i.frequency.value=n.freq,o.gain.setValueAtTime(0,t+n.start),o.gain.linearRampToValueAtTime(.15,t+n.start+.02),o.gain.exponentialRampToValueAtTime(.01,t+n.start+n.duration),i.connect(o),o.connect(e.destination),i.start(t+n.start),i.stop(t+n.start+n.duration+.1)})}function Pe(e){const t=e.currentTime;[{freq:392,start:0,duration:.3},{freq:349.23,start:.25,duration:.3},{freq:293.66,start:.5,duration:.5}].forEach(n=>{const i=e.createOscillator(),o=e.createGain();i.type="sine",i.frequency.value=n.freq,o.gain.setValueAtTime(0,t+n.start),o.gain.linearRampToValueAtTime(.12,t+n.start+.05),o.gain.exponentialRampToValueAtTime(.01,t+n.start+n.duration),i.connect(o),o.connect(e.destination),i.start(t+n.start),i.stop(t+n.start+n.duration+.1)})}function Ge(e){const t=e.currentTime,a=e.createOscillator(),n=e.createGain();a.type="sine",a.frequency.value=600,n.gain.setValueAtTime(.08,t),n.gain.exponentialRampToValueAtTime(.01,t+.05),a.connect(n),n.connect(e.destination),a.start(t),a.stop(t+.06)}function Ie(e){const t=e.currentTime;[0,.1].forEach((a,n)=>{const i=e.createOscillator(),o=e.createGain();i.type="square",i.frequency.value=n===0?440:880,o.gain.setValueAtTime(.1,t+a),o.gain.exponentialRampToValueAtTime(.01,t+a+.1),i.connect(o),o.connect(e.destination),i.start(t+a),i.stop(t+a+.15)})}function l(e){if(!y)try{const t=Me();switch(t.state==="suspended"&&t.resume(),e){case"correct":ze(t);break;case"wrong":He(t);break;case"attack":Ne(t);break;case"hit":Ce(t);break;case"victory":De(t);break;case"gameOver":Pe(t);break;case"click":Ge(t);break;case"start":Ie(t);break}}catch(t){console.warn("Audio error:",t)}}function Oe(e){y=e,localStorage.setItem("ninjago-muted",String(e))}function $(){return y}function _e(){return Oe(!y),y}let r=oe(),b=null,x=null,v=0;const c=e=>{const t=document.querySelector(e);if(!t)throw new Error(`Element not found: ${e}`);return t},Q=c("#start-screen"),z=c("#game-screen"),B=c("#gameover-screen"),de=c("#ninja-grid"),ue=c("#difficulty-buttons"),$e=c("#high-score-value"),Be=c("#start-btn"),R=c("#mute-btn"),Y=c("#current-score"),F=c("#current-streak"),Re=c("#back-btn"),h=c("#ninja-avatar"),g=c("#enemy-avatar"),Z=c("#problem-display"),d=c("#answer-input"),w=c("#answer-display"),A=c("#feedback"),p=c("#ninja-message"),Ve=c(".numpad"),qe=c("#backspace-btn"),Ke=c("#attack-btn"),ee=c("#player-health-fill"),Ye=c("#player-health-text"),te=c("#enemy-health-fill"),Fe=c("#enemy-health-text"),k=c("#battle-effect"),me=c("#player-damage-popup"),fe=c("#enemy-damage-popup"),O=c("#idle-timer-fill"),Ze=c("#final-score"),Xe=c("#final-correct"),We=c("#final-enemies"),Je=c("#restart-btn"),Ue=c("#menu-btn");function X(e,t=120){return`
    <svg viewBox="0 0 100 100" width="${t}" height="${t}" class="ninja-svg">
      <!-- TÅ‚o z kolorem Å¼ywioÅ‚u -->
      <circle cx="50" cy="50" r="48" fill="${e.color}" opacity="0.2"/>
      
      <!-- CiaÅ‚o ninja -->
      <ellipse cx="50" cy="70" rx="25" ry="20" fill="${e.color}"/>
      
      <!-- GÅ‚owa -->
      <circle cx="50" cy="35" r="22" fill="${e.color}"/>
      
      <!-- Maska ninja (odsÅ‚oniÄ™te oczy) -->
      <rect x="28" y="28" width="44" height="18" fill="#1a1a1a" rx="4"/>
      
      <!-- Oczy -->
      <ellipse cx="40" cy="35" rx="5" ry="4" fill="white"/>
      <ellipse cx="60" cy="35" rx="5" ry="4" fill="white"/>
      <circle cx="41" cy="35" r="2.5" fill="#222"/>
      <circle cx="61" cy="35" r="2.5" fill="#222"/>
      
      <!-- Blaski w oczach -->
      <circle cx="42" cy="34" r="1" fill="white"/>
      <circle cx="62" cy="34" r="1" fill="white"/>
      
      <!-- WÄ™zeÅ‚ maski -->
      <circle cx="78" cy="35" r="5" fill="#1a1a1a"/>
      <path d="M 78 40 Q 85 45 82 55" stroke="#1a1a1a" stroke-width="3" fill="none"/>
      <path d="M 78 40 Q 90 42 88 52" stroke="#1a1a1a" stroke-width="3" fill="none"/>
      
      <!-- Symbol Å¼ywioÅ‚u -->
      <text x="50" y="85" text-anchor="middle" font-size="20">${e.emoji}</text>
    </svg>
  `}function ye(e=120){return`
    <svg viewBox="0 0 100 100" width="${e}" height="${e}" class="enemy-svg">
      <!-- TÅ‚o -->
      <circle cx="50" cy="50" r="48" fill="#4a0080" opacity="0.2"/>
      
      <!-- CiaÅ‚o szkieleta -->
      <ellipse cx="50" cy="72" rx="22" ry="18" fill="#2d2d2d"/>
      
      <!-- KoÅ›ci Å¼eber -->
      <rect x="38" y="60" width="24" height="3" fill="#d4d4d4" rx="1"/>
      <rect x="40" y="65" width="20" height="3" fill="#d4d4d4" rx="1"/>
      <rect x="42" y="70" width="16" height="3" fill="#d4d4d4" rx="1"/>
      
      <!-- Czaszka -->
      <circle cx="50" cy="32" r="22" fill="#e8e8e8"/>
      
      <!-- OczodoÅ‚y -->
      <ellipse cx="40" cy="30" rx="7" ry="8" fill="#1a1a1a"/>
      <ellipse cx="60" cy="30" rx="7" ry="8" fill="#1a1a1a"/>
      
      <!-- Czerwone oczy -->
      <circle cx="40" cy="30" r="3" fill="#ff0000"/>
      <circle cx="60" cy="30" r="3" fill="#ff0000"/>
      
      <!-- Nos -->
      <path d="M 50 35 L 47 42 L 53 42 Z" fill="#1a1a1a"/>
      
      <!-- ZÄ™by -->
      <rect x="42" y="44" width="4" height="6" fill="#e8e8e8" rx="1"/>
      <rect x="48" y="44" width="4" height="6" fill="#e8e8e8" rx="1"/>
      <rect x="54" y="44" width="4" height="6" fill="#e8e8e8" rx="1"/>
      
      <!-- Miecz -->
      <rect x="75" y="20" width="4" height="40" fill="#808080"/>
      <rect x="72" y="55" width="10" height="4" fill="#8B4513"/>
      
      <!-- Emoji -->
      <text x="50" y="92" text-anchor="middle" font-size="16">ðŸ’€</text>
    </svg>
  `}function pe(){de.innerHTML=S.map(e=>`
    <button 
      class="ninja-card ${e.id===r.currentNinja.id?"selected":""}"
      data-ninja-id="${e.id}"
      style="--ninja-color: ${e.color}"
      title="${e.name} - ${e.element}"
    >
      <div class="ninja-card-avatar">
        ${X(e,80)}
      </div>
      <div class="ninja-card-name">${e.name}</div>
      <div class="ninja-card-element">${e.emoji} ${e.element}</div>
    </button>
  `).join("")}function he(){ue.innerHTML=L.map(e=>`
    <button 
      class="difficulty-btn ${e.id===r.difficulty.id?"selected":""}"
      data-difficulty-id="${e.id}"
    >
      <span class="difficulty-name">${e.namePolish}</span>
      <span class="difficulty-desc">${e.description}</span>
    </button>
  `).join("")}function Qe(){pe(),he(),$e.textContent=String(r.highScore),document.documentElement.style.setProperty("--current-ninja-color",r.currentNinja.color)}function et(){Y.textContent=String(r.score),F.textContent=String(r.streak),h.innerHTML=X(r.currentNinja,120),g.innerHTML=ye(120),r.currentProblem&&(Z.textContent=q(r.currentProblem)),N(),A.textContent="",A.className="feedback",p.textContent="",me.textContent="",fe.textContent="",k.className="battle-effect",d.value="",d.focus(),v=0,at()}function N(){const e=r.playerHealth/r.maxPlayerHealth*100,t=r.enemyHealth/r.maxEnemyHealth*100;ee.style.width=`${e}%`,te.style.width=`${t}%`,Ye.textContent=`${r.playerHealth}/${r.maxPlayerHealth}`,Fe.textContent=`${r.enemyHealth}/${r.maxEnemyHealth}`,ee.classList.toggle("low-health",e<=30),te.classList.toggle("low-health",t<=30)}function j(e,t,a=!1){const n=e==="player"?me:fe;n.textContent=a?`+${t}`:`-${t}`,n.className=`damage-popup ${a?"heal":"damage"} show`,setTimeout(()=>{n.classList.remove("show")},1e3)}function V(e){k.className=`battle-effect ${e}-attack`,e==="player"?(h.classList.add("attacking"),g.classList.add("hit")):(g.classList.add("attacking"),h.classList.add("hit")),setTimeout(()=>{k.className="battle-effect",h.classList.remove("attacking","hit"),g.classList.remove("attacking","hit")},500)}function tt(e,t,a){A.textContent=e?"âœ“ Dobrze!":`âœ— Å¹le! Poprawna odpowiedÅº: ${a}`,A.className=`feedback ${e?"correct":"incorrect"}`,p.textContent=t,p.className=`ninja-message ${e?"encouragement":"comfort"}`}function ge(){C(),Ze.textContent=String(r.score),Xe.textContent=String(r.correctAnswers),We.textContent=String(v),z.classList.add("hidden"),B.classList.remove("hidden")}function at(){C(),b=window.setInterval(()=>{Le(r)&&rt()},100),x=window.setInterval(()=>{nt()},50)}function C(){b&&(clearInterval(b),b=null),x&&(clearInterval(x),x=null)}function nt(){if(!r.isGameActive||r.isGameOver){O.style.width="100%";return}const e=Date.now()-r.lastAnswerTime,t=Math.max(0,100-e/u.IDLE_TIMEOUT_MS*100);O.style.width=`${t}%`,O.classList.toggle("danger",t<=30)}function rt(){const e=Se(r);r=e.state,e.attacked&&(l("hit"),V("enemy"),j("player",e.damage),N(),p.textContent="Zbyt wolno! WrÃ³g atakuje!",p.className="ninja-message comfort",e.playerDefeated&&(l("gameOver"),ge()))}function T(e){e==="start"?(C(),Q.classList.remove("hidden"),z.classList.add("hidden"),B.classList.add("hidden"),Qe()):(Q.classList.add("hidden"),B.classList.add("hidden"),z.classList.remove("hidden"),et())}de.addEventListener("click",e=>{const a=e.target.closest(".ninja-card");if(!a)return;const n=a.dataset.ninjaId;n&&(r=se(r,n),pe(),document.documentElement.style.setProperty("--current-ninja-color",r.currentNinja.color))});ue.addEventListener("click",e=>{const a=e.target.closest(".difficulty-btn");if(!a)return;const n=a.dataset.difficultyId;n&&(r=le(r,n),he())});Be.addEventListener("click",()=>{l("start"),r=ce(r),T("game")});Re.addEventListener("click",()=>{l("click"),C(),r.isGameActive=!1,T("start")});function we(){if(r.isGameOver)return;const e=parseInt(d.value,10);if(isNaN(e)){w.classList.add("shake"),setTimeout(()=>w.classList.remove("shake"),500);return}const t=r.currentProblem?.correctAnswer,a=je(r,e);if(r=a.state,a.playerAttacked?(l("correct"),l("attack"),V("player"),j("enemy",a.damageDealt),a.isCorrect&&setTimeout(()=>j("player",5,!0),300)):a.enemyAttacked&&(l("wrong"),l("hit"),V("enemy"),j("player",a.damageTaken)),N(),tt(a.isCorrect,a.message,t),Y.textContent=String(r.score),F.textContent=String(r.streak),a.enemyDefeated&&(v++,l("victory"),k.classList.add("enemy-defeated"),setTimeout(()=>k.classList.remove("enemy-defeated"),1e3)),a.playerDefeated){l("gameOver"),ge();return}r.currentProblem&&!r.isGameOver&&(Z.textContent=q(r.currentProblem)),d.value="",w.textContent="?",setTimeout(()=>{A.textContent="",p.textContent=""},1e3)}function H(){w.textContent=d.value||"?"}Ve.addEventListener("click",e=>{const a=e.target.dataset.num;a!==void 0&&!r.isGameOver&&(l("click"),d.value.length<4&&(d.value+=a,H()))});qe.addEventListener("click",()=>{!r.isGameOver&&d.value.length>0&&(l("click"),d.value=d.value.slice(0,-1),H())});Ke.addEventListener("click",()=>{r.isGameOver||we()});document.addEventListener("keydown",e=>{!r.isGameActive||r.isGameOver||z.classList.contains("hidden")||(e.key>="0"&&e.key<="9"?d.value.length<4&&(d.value+=e.key,H(),l("click")):e.key==="Backspace"?d.value.length>0&&(d.value=d.value.slice(0,-1),H(),l("click")):e.key==="Enter"&&we())});Je.addEventListener("click",()=>{l("start"),v=0;const e=r.currentNinja,t=r.difficulty;r=oe(),r=se(r,e.id),r=le(r,t.id),r=ce(r),Z.textContent=q(r.currentProblem),Y.textContent="0",F.textContent="0",h.innerHTML=X(r.currentNinja,120),document.documentElement.style.setProperty("--current-ninja-color",r.currentNinja.color),N(),g.innerHTML=ye(120),T("game"),d.value="",w.textContent="?"});Ue.addEventListener("click",()=>{l("click"),v=0,T("start")});function Ae(){R.textContent=$()?"ðŸ”‡":"ðŸ”Š",R.setAttribute("aria-label",$()?"WÅ‚Ä…cz dÅºwiÄ™ki":"Wycisz dÅºwiÄ™ki")}R.addEventListener("click",()=>{_e(),Ae(),$()||l("click")});function it(){Ae(),T("start")}it();
